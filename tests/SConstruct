from SconsUtils import cunit
from SconsUtils import utils

Import("env")

if utils.HEADERS.get("HAVE_CUNIT"):
    programs = Split("""
    resolver.c
    rdfvalues.c
    """)

    nenv = env.Clone()
    nenv.Append(CFLAGS="-Ilibreplace -Ilib ")

    cunit.buildCUnitTestFromFiles(nenv, programs,
                                  extraObjects = Split(env.libaff4_static_lib),
                                  CFLAGS=" -lxml ", LIBPATH="#lib/")
else:
    utils.warn("CUnit not found. Skipping unit tests.")
